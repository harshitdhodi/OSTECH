import{r as s,s as Fe,b as w,j as e}from"./index-Bf0_iwmC.js";import{R as oe}from"./quill.snow-N0L4fiYi.js";import{Q as Pe,B as De}from"./ReactToastify-C8h-yn_H.js";import"./clsx-B-dksMZM.js";const Ke=()=>{const[u,k]=s.useState(""),[F,P]=s.useState(""),[D,M]=s.useState(""),[c,v]=s.useState([]),[m,h]=s.useState([]),[b,p]=s.useState([]),[A,I]=s.useState("normal"),[n,g]=s.useState(""),[E,_]=s.useState(""),[q,K]=s.useState(""),[B,T]=s.useState(""),[R,L]=s.useState(""),[O,U]=s.useState(""),[H,$]=s.useState(""),[Q,Y]=s.useState(""),[y,ne]=s.useState([]),[r,z]=s.useState(""),[f,N]=s.useState(""),[V,x]=s.useState(""),[Me,re]=s.useState([]),[ce,ie]=s.useState([]),[de,Ae]=s.useState(""),[ue,W]=s.useState(""),[X,G]=s.useState(""),[J,Z]=s.useState(""),[i,C]=s.useState([]),[S,ee]=s.useState(""),me=Fe();s.useEffect(()=>{he(),be()},[]);const he=async()=>{try{const t=await w.get("/api/product/getall",{withCredentials:!0});ne(t.data)}catch(t){console.error(t)}},be=async()=>{try{const t=await w.get("/api/benefits/getBenefits",{withCredentials:!0});re(t.data)}catch(t){console.error(t)}},pe=async t=>{t.preventDefault();try{const a=new FormData;a.append("title",u),a.append("details",F),a.append("homeDetail",D),a.append("status",A),a.append("slug",n),a.append("metatitle",E),a.append("metakeywords",B),a.append("metadescription",q),a.append("metalanguage",R),a.append("metacanonical",O),a.append("metaschema",H),a.append("otherMeta",Q),a.append("categories",r),a.append("subcategories",f),a.append("subSubcategories",V),ce.forEach(o=>{a.append("benefits[]",o)}),c.forEach((o,d)=>{a.append("photo",o),a.append("alt",m[d]),a.append("imgtitle",b[d])}),a.append("catalogue",de),a.append("url",ue),a.append("priority",X),a.append("changeFreq",J),a.append("keyFeature",i);const l=await w.post("/api/product/insertProduct",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log(l.data),k(""),P(""),M(""),v([]),g(""),_(""),K(""),T(""),L(""),U(""),$(""),Y(""),I("active"),z(""),N(""),x(""),h([]),p([]),ie([]),W(""),C([]),G(""),Z(""),me("/product")}catch(a){console.error(a)}},ge=t=>{ee(t.target.value)},te=()=>{S.trim()&&(C([...i,S.trim()]),ee(""))},fe=t=>{t.key==="Enter"&&te()},xe=t=>{C(i.filter((a,l)=>l!==t))},je=t=>{const a=Array.from(t.target.files);if(c.length+a.length>5){De.error("You can only upload up to 5 photos");return}v([...c,...a]);const l=Array.from({length:a.length},()=>"");h([...m,...l]),p([...b,...l])},ve=t=>{v(a=>a.filter((l,o)=>o!==t)),h(a=>a.filter((l,o)=>o!==t)),p(a=>a.filter((l,o)=>o!==t))},ye=t=>e.jsx("option",{value:t._id,children:t.category},t._id),Ne=t=>{const a=t.target.value;z(a),N(""),x("")},Ce=t=>{const a=t.target.value;N(a),x("")},Se=t=>{const a=t.target.value;x(a)},j=(t,a)=>{for(const l of t){if(l._id===a)return l;if(l.subCategories){const o=j(l.subCategories,a);if(o)return o}}return null},we=(t,a)=>{const l=j(t,a);return l?l.subCategories||[]:[]},ke=(t,a,l)=>{const o=j(t,a);if(o&&o.subCategories){const d=j(o.subCategories,l);return d?d.subSubCategory||[]:[]}return[]},ae=r?we(y,r):[],se=r&&f?ke(y,r,f):[],le={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}};return s.useEffect(()=>{n&&W(`http://localhost:3000/product/${n}`)},[n]),s.useEffect(()=>{g(u)},[u]),s.useEffect(()=>{g(n.replace(/\s+/g,"-").toLowerCase())},[n]),e.jsxs("form",{onSubmit:pe,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Product"}),e.jsx(Pe,{}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"parentCategory",className:"block font-semibold mb-2",children:"Parent Category"}),e.jsxs("select",{id:"parentCategory",value:r,onChange:Ne,className:"w-full p-2 border rounded focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Parent Category"}),y.map(ye)]})]}),ae.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subCategory",className:"block font-semibold mb-2",children:"Subcategory (optional)"}),e.jsxs("select",{id:"subCategory",value:f,onChange:Ce,className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Subcategory"}),ae.map(t=>e.jsx("option",{value:t._id,children:t.category},t._id))]})]}),se.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subSubCategory",className:"block font-semibold mb-2",children:"Sub-Subcategory (optional)"}),e.jsxs("select",{id:"subSubCategory",value:V,onChange:Se,className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Sub-Subcategory"}),se.map(t=>e.jsx("option",{value:t._id,children:t.category},t._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:u,onChange:t=>k(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Home Detail"}),e.jsx(oe,{id:"homeDetail",value:D,onChange:t=>M(t),modules:le,className:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),e.jsx(oe,{id:"details",value:F,onChange:t=>P(t),modules:le,className:""})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photos"}),e.jsx("input",{type:"file",name:"photo",id:"photo",multiple:!0,onChange:je,className:"border rounded focus:outline-none ",accept:"image/*"}),c.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-4",children:c.map((t,a)=>e.jsxs("div",{className:"relative w-56 group flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-56",children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Service ${a+1}`,className:"h-32 w-56 object-cover"}),e.jsx("button",{onClick:()=>ve(a),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]}),e.jsxs("label",{className:"block mt-2",children:["Alternative Text:",e.jsx("input",{type:"text",value:m[a],onChange:l=>{const o=[...m];o[a]=l.target.value,h(o)},className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("label",{className:"block mt-2",children:["Image title:",e.jsx("input",{type:"text",value:b[a],onChange:l=>{const o=[...b];o[a]=l.target.value,p(o)},className:"w-full p-2 border rounded focus:outline-none"})]})]},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"keyFeature",className:"block font-semibold mb-2",children:"Key Features"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",id:"keyFeature",value:S,onChange:ge,onKeyPress:fe,className:"w-full p-2 border rounded focus:outline-none",placeholder:"Enter key feature and press Add or Enter"}),e.jsx("button",{type:"button",onClick:te,className:"ml-2 bg-blue-500 text-white p-2 rounded hover:bg-blue-600",children:"Add"})]}),e.jsx("div",{className:"mt-2",children:i.length>0&&e.jsx("ul",{className:"space-y-2",children:i.map((t,a)=>e.jsxs("li",{className:"flex items-center bg-gray-50 p-2 rounded",children:[e.jsx("span",{className:"flex-1",children:t}),e.jsx("button",{type:"button",onClick:()=>xe(a),className:"ml-2 text-red-500 hover:text-red-700","aria-label":"Delete feature",children:"Ã—"})]},a))})})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{type:"text",id:"slug",value:n,onChange:t=>g(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{disabled:!0,type:"url",id:"url",value:`http://localhost:3000/product/${n}`,className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("textarea",{id:"meta",value:E,onChange:t=>_(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta",value:q,onChange:t=>K(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("textarea",{id:"meta",value:B,onChange:t=>T(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("textarea",{id:"meta",value:O,onChange:t=>U(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("textarea",{id:"meta",value:R,onChange:t=>L(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("textarea",{id:"meta",value:Q,onChange:t=>Y(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("textarea",{id:"meta",value:H,onChange:t=>$(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:X,onChange:t=>G(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:J,onChange:t=>Z(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:A,onChange:t=>I(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"active",children:"Popular"}),e.jsx("option",{value:"inactive",children:"Normal"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded focus:outline-none",children:"Save Product"})})]})};export{Ke as default};
