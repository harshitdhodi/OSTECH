import{r as a,s as Y,j as e,t as Z,v as C,w as _,L as S,x as ee,y as se,b as d,z as te,C as H,D as ae}from"./index-Bf0_iwmC.js";import{r as k,U as re,l as le}from"./index-DPkFNSVF.js";import{Q as ie,B as ne}from"./ReactToastify-C8h-yn_H.js";import{M}from"./index-D-LDOxyL.js";import{R as oe}from"./quill.snow-N0L4fiYi.js";import"./clsx-B-dksMZM.js";import"./index-D5MXH53t.js";M.setAppElement("#root");const ge=()=>{const[p,g]=a.useState(""),[b,j]=a.useState(""),[u,B]=a.useState([]),[A,f]=a.useState(!0),[r,n]=a.useState(0),[o,P]=a.useState(0),[c,T]=a.useState("All"),[x,F]=a.useState(""),[l,N]=a.useState(null),[D,y]=a.useState(!1),i=Y(),v=5,$=a.useMemo(()=>u.filter(s=>c==="Meta Available"?s.metatitle&&s.metatitle.length>0||s.metadescription&&s.metadescription.length>0:c==="Meta Unavailable"?!s.metatitle||s.metatitle.length===0||!s.metadescription||s.metadescription.length===0:!0).filter(s=>s.title.toLowerCase().includes(x.toLowerCase())),[u,x,c]),E=()=>{ne.success("Updated Successfully!")},R=a.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Category",accessor:"categoryName",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>i(`/news/editNews/${s.original.slug}`),children:s.original.categoryName})},{Header:"Title",accessor:"title",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>i(`/news/editNews/${s.original.slug}`),children:s.original.title})},{Header:"Photo",accessor:"photo",Cell:({value:s})=>{const t=Array.isArray(s)&&s.length>0?s[0]:null;return t?e.jsx("img",{src:`/api/image/download/${t}`,alt:"News",className:"w-32 h-20 object-cover"}):null},disableSortBy:!0},{Header:"Posted By",accessor:"postedBy",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>i(`/news/editNews/${s.original.slug}`),children:s.original.postedBy})},{Header:"Date",accessor:"date",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>i(`/news/editNews/${s.original.slug}`),children:s.original.date})},{Header:"Visits",accessor:"visits",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>i(`/news/editNews/${s.original.slug}`),children:s.original.visits})},{Header:"Status",accessor:"status",Cell:({value:s})=>s==="active"?e.jsx(Z,{className:"text-green-500"}):e.jsx(C,{className:"text-red-500"}),disableSortBy:!0},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",onClick:()=>q(s.original),children:e.jsx(_,{})}),e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(S,{to:`/news/editNews/${s.original.slug}`,children:e.jsx(ee,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>V(s.original.slug),children:e.jsx(se,{})})]}),disableSortBy:!0}],[]),{getTableProps:U,getTableBodyProps:L,headerGroups:z,rows:I,prepareRow:O}=k.useTable({columns:R,data:$},k.useSortBy),w=async s=>{f(!0);try{const t=await d.get(`/api/news/getNews?page=${s+1}`,{withCredentials:!0}),m=t.data.data.map((K,X)=>({...K,id:s*v+X+1}));B(m),P(Math.ceil(t.data.total/v))}catch(t){console.error(t)}finally{f(!1)}},q=s=>{N(s),y(!0)},h=()=>{y(!1),N(null)},V=async s=>{try{const t=await d.delete(`/api/news/deleteNews?slugs=${s}`,{withCredentials:!0});w()}catch(t){console.error(t)}};a.useEffect(()=>{w(r)},[r]);const Q=async()=>{try{const s=await d.get("/api/pageHeading/heading?pageType=news",{withCredentials:!0}),{heading:t,subheading:m}=s.data;g(t||""),j(m||"")}catch(s){console.error(s)}},G=async()=>{try{await d.put("/api/pageHeading/updateHeading?pageType=news",{pagetype:"news",heading:p,subheading:b},{withCredentials:!0}),E()}catch(s){console.error(s)}};a.useEffect(()=>{Q()},[]);const W=s=>g(s.target.value),J=s=>j(s.target.value);return e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(ie,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded ",children:[e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-2 grid-cols-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:p,onChange:W,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Sub heading"}),e.jsx("input",{type:"text",value:b,onChange:J,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:G,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"News"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-2 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300",value:c,onChange:s=>T(s.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Meta Available",children:"Meta Available"}),e.jsx("option",{value:"Meta Unavailable",children:"Meta Unavailable"})]}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(S,{to:"/news/createNews",children:e.jsx(te,{size:15})})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:x,onChange:s=>F(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage News"}),A?e.jsx("div",{className:"flex justify-center",children:e.jsx(re,{animation:le,size:56})}):e.jsx(e.Fragment,{children:u.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...U(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:z.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsx("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif ",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"",children:t.render("Header")}),t.canSort&&e.jsx("span",{className:"ml-1",children:t.isSorted?t.isSortedDesc?e.jsx(H,{}):e.jsx(ae,{}):e.jsx(H,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...L(),children:I.map(s=>(O(s),e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"py-2 px-4 ",children:t.render("Cell")}))})))})]})}),e.jsxs("div",{className:"mt-4 flex justify-center",children:[e.jsx("button",{onClick:()=>n(0),disabled:r===0,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:"<<"})," ",e.jsx("button",{onClick:()=>n(r-1),disabled:r===0,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:"<"})," ",e.jsx("button",{onClick:()=>n(r+1),disabled:r+1>=o,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:">"})," ",e.jsx("button",{onClick:()=>n(o-1),disabled:r+1>=o,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:">>"})," ",e.jsxs("span",{children:["Page"," ",e.jsxs("strong",{children:[r+1," of ",o]})," "]})]}),e.jsx(M,{isOpen:D,onRequestClose:h,contentLabel:"Banner Details",className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow-lg w-96 relative",children:[e.jsx("button",{onClick:h,className:"absolute top-5 right-5 text-gray-500 hover:text-gray-700",children:e.jsx(C,{size:20})}),e.jsx("h2",{className:"text-xl font-bold mb-4 font-serif",children:"News"}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Category :"}),e.jsx("p",{children:l.categoryName})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"title:"}),e.jsx("p",{children:l.title})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Description :"}),e.jsx(oe,{readOnly:!0,value:l.details,modules:{toolbar:!1},theme:"bubble",className:"quill"}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Posted By :"}),e.jsx("p",{children:l.postedBy})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Date :"}),e.jsx("p",{children:l.postedBy})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Visits :"}),e.jsx("p",{children:l.visits})]})]})]}),e.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300",children:"Close"})]})})]})};export{ge as default};
