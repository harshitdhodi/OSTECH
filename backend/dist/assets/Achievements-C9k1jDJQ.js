import{r as a,s as F,j as e,L as m,x as D,y as L,b as r,z as R,C as x,D as U}from"./index-Bf0_iwmC.js";import{r as g,U as $,l as z}from"./index-DPkFNSVF.js";import{Q as I,B as M}from"./ReactToastify-C8h-yn_H.js";import"./clsx-B-dksMZM.js";const Q=()=>{const[c,l]=a.useState(""),[d,h]=a.useState(""),[i,b]=a.useState([]),[f,u]=a.useState(!0),[n,j]=a.useState(""),y=F(),v=a.useMemo(()=>i.filter(s=>s.title.toLowerCase().includes(n.toLowerCase())),[i,n]),N=()=>{M.success("Updated Successfully!")},w=a.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Title",accessor:"title",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>y(`/certificates/editcertificates/${s.original._id}`),children:s.original.title})},{Header:"Photo",accessor:"photo",Cell:({value:s})=>{const t=Array.isArray(s)&&s.length>0?s[0]:null;return t?e.jsx("img",{src:`/api/image/download/${t}`,alt:"Achievement",className:"w-32 h-20 object-cover"}):null},disableSortBy:!0},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex  gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(m,{to:`/certificates/editcertificates/${s.original._id}`,children:e.jsx(D,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>P(s.original._id),children:e.jsx(L,{})})]}),disableSortBy:!0}],[]),{getTableProps:C,getTableBodyProps:S,headerGroups:H,rows:A,prepareRow:T}=g.useTable({columns:w,data:v},g.useSortBy),p=async()=>{u(!0);try{const t=(await r.get("/api/achievements",{withCredentials:!0})).data.map((o,E)=>({...o,id:E+1}));b(t)}catch(s){console.error(s)}finally{u(!1)}},P=async s=>{try{const t=await r.delete(`/api/achievements/deleteAchievements?id=${s}`,{withCredentials:!0});p()}catch(t){console.error(t)}};a.useEffect(()=>{p()},[]);const B=async()=>{try{const s=await r.get("/api/pageHeading/heading?pageType=achievement",{withCredentials:!0}),{heading:t,subheading:o}=s.data;l(t||""),h(o||"")}catch(s){console.error(s)}},k=async()=>{try{await r.put("/api/pageHeading/updateHeading?pageType=achievement",{pagetype:"achievement",heading:c,subheading:d},{withCredentials:!0}),N()}catch(s){console.error(s)}};return a.useEffect(()=>{B()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(I,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded ",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:c,onChange:s=>l(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 font-serif uppercase",children:"Sub heading"}),e.jsx("input",{type:"text",value:d,onChange:s=>h(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"Certificates"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(m,{to:"/certificates/createcertificates",children:e.jsx(R,{size:15})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:n,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage your certificates"}),f?e.jsx("div",{className:"flex justify-center",children:e.jsx($,{animation:z,size:56})}):e.jsx(e.Fragment,{children:i.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse overflow-x-auto",...C(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:H.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsx("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center  gap-2 ",children:[e.jsx("span",{children:t.render("Header")}),t.canSort&&e.jsx("span",{className:"ml-1",children:t.isSorted?t.isSortedDesc?e.jsx(x,{}):e.jsx(U,{}):e.jsx(x,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...S(),children:A.map(s=>(T(s),e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150  ",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"py-2 px-4 ",children:t.render("Cell")}))})))})]})})]})};export{Q as default};
