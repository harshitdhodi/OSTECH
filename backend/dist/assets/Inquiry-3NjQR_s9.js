import{r as a,j as e,y as L,b as c,C as u,D as R}from"./index-Bf0_iwmC.js";import{r as x,U as G,l as U}from"./index-DPkFNSVF.js";const $=()=>{const[r,h]=a.useState([]),[m,o]=a.useState(!0),[p,f]=a.useState(""),[i,b]=a.useState("All"),[g,j]=a.useState(0),[y,w]=a.useState(0),[N,v]=a.useState(0),[l,S]=a.useState([]),[n,C]=a.useState([]),d=async()=>{o(!0);try{const t=await c.get("/api/inquiries/getInquiries",{withCredentials:!0}),{totalCount:s,countWithFields:D,countWithoutFields:I,dataWithFields:B,dataWithoutFields:O,inquiries:k}=t.data;j(s),w(D),v(I),S(B),C(O),h(k)}catch(t){console.error(t)}finally{o(!1)}};a.useEffect(()=>{d()},[]);const F=t=>{b(t.target.value)},W=a.useMemo(()=>{switch(i){case"GPM":return l;case"SEO":return n;default:return r}},[i,l,n,r]),q=a.useMemo(()=>[{Header:"ID",accessor:"id",Cell:({row:t})=>e.jsx("div",{children:t.index+1})},{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Mobile No",accessor:"mobileNo"},{Header:"Message",accessor:"message"},{Header:"Options",Cell:({row:t})=>e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>T(t.original._id),children:e.jsx(L,{})})}),disableSortBy:!0}],[]),{getTableProps:P,getTableBodyProps:M,headerGroups:A,rows:E,prepareRow:H}=x.useTable({columns:q,data:W},x.useSortBy),T=async t=>{try{const s=await c.delete(`/api/inquiries/deleteInquiry?id=${t}`,{withCredentials:!0});d()}catch(s){console.error(s)}};return e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase mb-4",children:"Inquiries"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by name...",value:p,onChange:t=>f(t.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-12 mt-8",children:[e.jsxs("div",{className:"rounded bg-gradient-to-r from-red-400 to-red-600 p-4 flex justify-between items-center px-12 ",children:[e.jsx("h3",{className:"font-semibold text-[45px] text-white font-serif",children:"All"}),e.jsx("button",{className:"font-bold text-[40px] text-black bg-white w-16 h-16 flex items-center justify-center rounded shadow",children:g})]}),e.jsxs("div",{className:"rounded bg-gradient-to-r from-blue-400 to-blue-600 p-4 flex justify-between items-center px-12",children:[e.jsx("h3",{className:" font-semibold text-[45px] text-white font-serif",children:"PM"}),e.jsx("p",{className:" font-bold text-[40px] text-black bg-white w-16 h-16 flex items-center justify-center rounded shadow",children:y})]}),e.jsxs("div",{className:"rounded bg-gradient-to-r from-yellow-400 to-yellow-600 p-4 flex justify-between items-center px-12",children:[e.jsx("h3",{className:" font-semibold text-[45px] text-white font-serif",children:"SEO"}),e.jsx("p",{className:"font-bold text-[40px] text-black bg-white w-16 h-16 flex items-center justify-center rounded shadow",children:N})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage Inquiries"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i,onChange:F,className:"appearance-none bg-white border border-gray-300 hover:border-gray-500 px-4 py-2 w-32 rounded-md focus:outline-none focus:border-blue-500 transition duration-300",children:[e.jsx("option",{value:"All",children:"ALL"}),e.jsx("option",{value:"GPM",children:"PM"}),e.jsx("option",{value:"SEO",children:"SEO"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 14.707a1 1 0 0 1-1.414 0l-4-4a1 1 0 1 1 1.414-1.414L9 12.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4z"})})})]})]}),m?e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{animation:U,size:56})}):e.jsx(e.Fragment,{children:r.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...P(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:A.map(t=>e.jsx("tr",{...t.getHeaderGroupProps(),children:t.headers.map(s=>e.jsx("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer",children:e.jsxs("div",{className:"flex items-center uppercase font-serif gap-2",children:[e.jsx("span",{className:"",children:s.render("Header")}),s.canSort&&e.jsx("span",{className:"ml-1",children:s.isSorted?s.isSortedDesc?e.jsx(u,{}):e.jsx(R,{}):e.jsx(u,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...M(),children:E.map(t=>(H(t),e.jsx("tr",{...t.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150 ",children:t.cells.map(s=>e.jsx("td",{...s.getCellProps(),className:"py-2 px-4",children:s.render("Cell")}))})))})]})})]})};export{$ as default};
