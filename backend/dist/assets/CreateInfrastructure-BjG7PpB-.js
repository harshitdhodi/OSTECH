import{r as i,s as N,j as t,b as v}from"./index-Bf0_iwmC.js";import{Q as w,B as y}from"./ReactToastify-C8h-yn_H.js";import{R as k}from"./quill.snow-N0L4fiYi.js";import"./clsx-B-dksMZM.js";const A={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},S=()=>{const[u,d]=i.useState(""),[m,p]=i.useState(""),[l,c]=i.useState([]),[a,n]=i.useState([]),h=N(),f=()=>{y.error("You can only upload up to 5 photos")},b=s=>{const e=Array.from(s.target.files);if(l.length+e.length>5){f();return}c([...l,...e]);const r=Array.from({length:e.length},()=>"");n([...a,...r])},x=s=>{c(e=>e.filter((r,o)=>o!==s)),n(e=>e.filter((r,o)=>o!==s))},g=async s=>{s.preventDefault();try{const e=new FormData;e.append("title",u),e.append("description",m),l.forEach((o,j)=>{e.append("photo",o),e.append("alt",a[j])});const r=await v.post("/api/infrastructure/createInfrastructure",e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});d(""),p(""),c([]),n([]),h("/infrastructure")}catch(e){console.error(e)}};return t.jsxs("form",{onSubmit:g,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Infrastructure"}),t.jsx(w,{}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{id:"title",value:u,onChange:s=>d(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),t.jsx(k,{value:m,onChange:p,modules:A,className:"quill"})]}),t.jsxs("div",{className:"mt-12",children:[t.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photos"}),t.jsx("input",{type:"file",name:"photo",id:"photo",multiple:!0,onChange:b,className:"border rounded focus:outline-none ",accept:"image/*"}),l.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-4",children:l.map((s,e)=>t.jsxs("div",{className:"relative w-56 group flex flex-col items-center",children:[t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(s),alt:`Infrastructure ${e+1}`,className:"h-32 w-56 object-cover"}),t.jsx("button",{onClick:()=>x(e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]}),t.jsxs("label",{className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",value:a[e],onChange:r=>{const o=[...a];o[e]=r.target.value,n(o)},className:"w-full p-2 border rounded focus:outline-none"})]})]},e))})]}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded mt-8",children:"Add Infrastructure"})]})};export{S as default};
