import{r as o,j as e,L as A,x as E,C as u,D as F,b as c}from"./index-Bf0_iwmC.js";import{r as f,U as P,l as H}from"./index-DPkFNSVF.js";const l=(d,m)=>{const n=[];return d.forEach(s=>{n.push({_id:s._id,url:s.url,metatitle:s.metatitle,metadescription:s.metadescription,metakeywords:s.metakeywords,metacanonical:s.metacanonical,metalanguage:s.metalanguage,metaschema:s.metaschema,otherMeta:s.otherMeta,type:m}),Array.isArray(s.subCategories)&&s.subCategories.forEach(a=>{n.push({_id:a._id,url:a.url,metatitle:a.metatitle,metadescription:a.metadescription,metakeywords:a.metakeywords,metacanonical:a.metacanonical,metalanguage:a.metalanguage,metaschema:a.metaschema,otherMeta:a.otherMeta,type:m}),Array.isArray(a.subSubCategory)&&a.subSubCategory.forEach(i=>{n.push({_id:i._id,url:i.url,metatitle:i.metatitle,metadescription:i.metadescription,metakeywords:i.metakeywords,metacanonical:i.metacanonical,metalanguage:i.metalanguage,metaschema:i.metaschema,otherMeta:i.otherMeta,type:m})})})}),n},B=()=>{const[d,m]=o.useState([]),[n,s]=o.useState(!0),[a,i]=o.useState(""),[h,y]=o.useState(!1),[p,j]=o.useState(!1),w=o.useMemo(()=>d.filter(t=>{const r=t.url.toLowerCase().includes(a.toLowerCase()),g=h?!t.metatitle:!0,x=p?!t.metadescription:!0;return r&&g&&x}),[d,a,h,p]),N=o.useMemo(()=>[{Header:"URL",accessor:"url"},{Header:"Meta Title",accessor:"metatitle"},{Header:"Meta Description",accessor:"metadescription"},{Header:"Options",Cell:({row:t})=>e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(A,{to:`/metadetails/editMetaDetails/${t.original._id}/${t.original.type}`,children:e.jsx(E,{})})})}),disableSortBy:!0}],[]),{getTableProps:C,getTableBodyProps:M,headerGroups:b,rows:v,prepareRow:D}=f.useTable({columns:N,data:w},f.useSortBy),k=async()=>{s(!0);try{const[t,r,g,x,R,T,S]=await Promise.all([c.get("/api/sitemap/fetchSitemaps",{withCredentials:!0}),c.get("/api/product/fetchUrlmeta",{withCredentials:!0}),c.get("/api/product/fetchCategoryUrlmeta",{withCredentials:!0}),c.get("/api/services/fetchUrlmeta",{withCredentials:!0}),c.get("/api/services/fetchCategoryUrlmeta",{withCredentials:!0}),c.get("/api/news/fetchUrlmeta",{withCredentials:!0}),c.get("/api/news/fetchCategoryUrlmeta",{withCredentials:!0})]),U=[...l(t.data,"data"),...l(r.data,"products"),...l(g.data,"product-category"),...l(x.data,"service"),...l(R.data,"service-category"),...l(T.data,"new"),...l(S.data,"news-category")];m(U)}catch(t){console.error(t)}finally{s(!1)}};return o.useEffect(()=>{k()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"Meta Details"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by URL...",value:a,onChange:t=>i(t.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsxs("div",{className:"mb-4 ",children:[e.jsxs("label",{className:"mr-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:t=>y(t.target.checked),className:"mr-2 w-4 h-4"}),"Show entries without Meta Title"]}),e.jsxs("label",{className:"ml-4",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t=>j(t.target.checked),className:"mr-2 w-4 h-4"}),"Show entries without Meta Description"]})]}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage Meta Details"}),n?e.jsx("div",{className:"flex justify-center",children:e.jsx(P,{animation:H,size:56})}):e.jsx(e.Fragment,{children:d.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...C(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:b.map(t=>e.jsx("tr",{...t.getHeaderGroupProps(),children:t.headers.map(r=>e.jsx("th",{...r.getHeaderProps(r.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer",children:e.jsxs("div",{className:"flex items-center uppercase font-serif gap-2",children:[e.jsx("span",{children:r.render("Header")}),r.canSort&&e.jsx("span",{className:"ml-1",children:r.isSorted?r.isSortedDesc?e.jsx(u,{}):e.jsx(F,{}):e.jsx(u,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...M(),children:v.map(t=>(D(t),e.jsx("tr",{...t.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150",children:t.cells.map(r=>e.jsx("td",{...r.getCellProps(),className:"py-2 px-4",children:r.render("Cell")}))})))})]})})]})};export{B as default};
