import{r as o,j as t,b as u}from"./index-Bf0_iwmC.js";import{R as V}from"./quill.snow-N0L4fiYi.js";import{B as T}from"./ReactToastify-C8h-yn_H.js";import"./clsx-B-dksMZM.js";const z=()=>{const[h,m]=o.useState(""),[p,b]=o.useState(""),[n,r]=o.useState([]),[x,f]=o.useState(""),[j,v]=o.useState([]),[d,g]=o.useState([]),[i,c]=o.useState([]),P=()=>{T.success("Updated Successfully!")},A={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},N=()=>{u.get("/api/vision/getVision",{withCredentials:!0}).then(s=>{const e=s.data.data||{};m(e.title||""),b(e.description||""),v(e.photo||[]),f(e.status||"active"),c(e.alt||[])}).catch(s=>{console.error("Error fetching mission data:",s)})};o.useEffect(()=>{N()},[]);const C=s=>{s.preventDefault();const e=new FormData;e.append("title",h),e.append("description",p),e.append("status",x);const a=[...i,...d];n.forEach(l=>{e.append("photo",l)}),a.forEach(l=>{e.append("alt",l)}),u.put("/api/vision/updateVision",e,{withCredentials:!0}).then(l=>{P(),r([]),g([]),N()}).catch(l=>{console.error("Error updating mission:",l)})},k=s=>{const e=Array.from(s.target.files);r([...n,...e])},y=(s,e)=>{const a=[...i];a[e]=s.target.value,c(a)},S=(s,e)=>{const a=[...d];a[e]=s.target.value,g(a)},D=(s,e)=>{s.preventDefault();const a=[...n];a.splice(e,1),r(a);const l=[...i];l.splice(e,1),c(l)},$=(s,e,a)=>{s.preventDefault(),u.delete(`/api/vision/image/${e}/${a}`,{withCredentials:!0}).then(l=>{const E=j.filter(F=>F!==e);v(E);const w=[...i];w.splice(a,1),c(w)}).catch(l=>{console.error(l)})};return t.jsx("div",{children:t.jsxs("form",{onSubmit:C,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase text-center",children:"Manage Vision"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{type:"text",id:"title",value:h,onChange:s=>m(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),t.jsx(V,{value:p,onChange:b,modules:A,className:"quill"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:j.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${s}`,alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:i[e],onChange:a=>y(a,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:a=>$(a,s,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",onChange:k,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"fle flex-wrap gap-4 mt-4",children:n.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(s),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:d[e]||"",onChange:a=>S(a,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:a=>D(a,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),t.jsxs("select",{id:"status",value:x,onChange:s=>f(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsx("button",{type:"submit",className:"bg-slate-700 text-white py-2 px-4 rounded hover:bg-slate-800",children:"Update Vision"})]})})};export{z as default};
