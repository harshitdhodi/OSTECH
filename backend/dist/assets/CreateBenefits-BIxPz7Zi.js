import{r,s as w,j as t,b as y}from"./index-Bf0_iwmC.js";import{Q as A,B as C}from"./ReactToastify-C8h-yn_H.js";import"./clsx-B-dksMZM.js";const k=()=>{const[h,f]=r.useState(""),[b,x]=r.useState(""),[n,m]=r.useState([]),[p,i]=r.useState([]),[u,c]=r.useState([]),g=w(),j=s=>{const e=Array.from(s.target.files);if(n.length+e.length>5){C.error("You can only upload up to 5 photos");return}m([...n,...e]);const l=Array.from({length:e.length},()=>"");i([...p,...l]),c([...u,...Array(e.length).fill("")])},N=s=>{m(e=>e.filter((l,a)=>a!==s)),i(e=>e.filter((l,a)=>a!==s)),c(e=>e.filter((l,a)=>a!==s))},v=async s=>{s.preventDefault();try{const e=new FormData;e.append("title",h),e.append("description",b),n.forEach((a,o)=>{e.append("photo",a),e.append("alt",p[o]),e.append("imgtitle",u[o])});const l=await y.post("/api/benefits/createBenefit",e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});f(""),x(""),m([]),c([]),i([]),g("/benefits")}catch(e){console.error(e)}};return t.jsxs("form",{onSubmit:v,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Benefit"}),t.jsx(A,{}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{id:"title",value:h,onChange:s=>f(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"description",className:"block font-semibold mb-2",children:"Description"}),t.jsx("textarea",{id:"description",value:b,onChange:s=>x(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add Photos"}),t.jsx("input",{type:"file",onChange:j,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:n.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(s),alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:p[e],onChange:l=>i(a=>a.map((o,d)=>d===e?l.target.value:o)),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgtitle-${e}`,className:"block mt-2",children:["Title Text:",t.jsx("input",{type:"text",id:`imgtitle-${e}`,value:u[e],onChange:l=>c(a=>a.map((o,d)=>d===e?l.target.value:o)),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:()=>N(e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded mt-8",children:"Add Benefit"})]})};export{k as default};
