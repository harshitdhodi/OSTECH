import{E as f,s as p,r as d,j as e,b as u}from"./index-Cejaucag.js";const v=()=>{const{id:l}=f(),m=p(),[t,i]=d.useState({title:"",youtubeId:"",duration:"",views:"",channel:"",videoId:""}),[r,c]=d.useState("");d.useEffect(()=>{(async()=>{try{const a=(await u.get(`/api/video/getVideoById?id=${l}`)).data.data;i(a),c(a.videoId)}catch(o){console.error("Error fetching video data:",o)}})()},[l]);const n=s=>{const{name:o,value:a}=s.target;i({...t,[o]:a})},b=s=>{const o=s.target.files[0];o&&(i({...t,videoId:o}),c(URL.createObjectURL(o)))},h=async s=>{s.preventDefault();const o=new FormData;Object.keys(t).forEach(a=>{o.append(a,t[a])});try{await u.put(`/api/video/editVideo?id=${l}`,o,{headers:{"Content-Type":"multipart/form-data"}}),m("/video")}catch(a){console.error("Error updating video:",a),alert("Failed to update video.")}};return e.jsxs("div",{className:"container mx-auto mt-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Update Video"}),e.jsxs("form",{onSubmit:h,className:" mx-auto bg-white p-6 rounded shadow",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:n,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"youtubeId",children:"YouTube ID"}),e.jsx("input",{type:"text",id:"youtubeId",name:"youtubeId",value:t.youtubeId,onChange:n,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"duration",children:"Duration"}),e.jsx("input",{type:"text",id:"duration",name:"duration",value:t.duration,onChange:n,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"views",children:"Views"}),e.jsx("input",{type:"text",id:"views",name:"views",value:t.views,onChange:n,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"channel",children:"Channel"}),e.jsx("input",{type:"text",id:"channel",name:"channel",value:t.channel,onChange:n,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"videoId",children:"Upload New Video"}),e.jsx("input",{type:"file",id:"videoId",name:"videoId",accept:"video/*",onChange:b,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-200"})]}),r&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Current Video Preview:"}),e.jsx("video",{controls:!0,src:`/api/upload/play/${r}`,className:"w-full rounded shadow",children:"Your browser does not support the video tag."})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-200",children:"Update Video"})]})]})};export{v as default};
