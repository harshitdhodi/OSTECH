import{r as o,s as P,j as e,L as l,x as c,y as x,b as j,z as R,C as m,D as k,R as v}from"./index-Bf0_iwmC.js";import{r as y,U as w,l as A}from"./index-DPkFNSVF.js";import{b}from"./index-X6UpumMK.js";const E=()=>{const[g,u]=o.useState([]),[C,h]=o.useState(!0),n=P(),N=o.useMemo(()=>[{Header:"ID",accessor:"autoIncrementId"},{Header:"Category",accessor:"category",Cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2 hover:text-blue-500 cursor-pointer",onClick:()=>n(`/ServiceCategory/editServiceCategory/${s.original._id}`),children:[s.original.photo&&e.jsx("img",{src:`/api/logo/download/${s.original.photo}`,alt:s.original.alt,className:"w-6 h-6"}),s.original.category]})},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(l,{to:`/ServiceCategory/editServiceCategory/${s.original._id}`,children:e.jsx(c,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>d({id:s.original._id}),children:e.jsx(x,{})})]}),disableSortBy:!0}],[]),{getTableProps:f,getTableBodyProps:$,headerGroups:S,rows:_,prepareRow:I}=y.useTable({columns:N,data:g},y.useSortBy),p=async()=>{h(!0);try{const t=(await j.get("/api/services/getall",{withCredentials:!0})).data.map((a,r)=>({...a,autoIncrementId:r+1}));u(t)}catch(s){console.error(s)}finally{h(!1)}},d=async({id:s,categoryId:t,subCategoryId:a,subSubCategoryId:r})=>{let i="";t&&a&&r?i=`/api/services/deletesubsubcategory?categoryId=${t}&subCategoryId=${a}&subSubCategoryId=${r}`:t&&a?i=`/api/services/deletesubcategory?categoryId=${t}&subCategoryId=${a}`:i=`/api/services/deletecategory?id=${s}`;try{await j.delete(i,{withCredentials:!0}),p()}catch(F){console.error(F)}};return o.useEffect(()=>{p()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"Categories"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300",children:e.jsx(l,{to:"/ServiceCategory/CreateServiceCategory",children:e.jsx(R,{size:15})})})]}),C?e.jsx("div",{className:"flex justify-center",children:e.jsx(w,{animation:A,size:56})}):e.jsx(e.Fragment,{children:g.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...f(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:S.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsx("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx("span",{children:t.render("Header")}),t.canSort&&e.jsx("span",{className:"ml-1",children:t.isSorted?t.isSortedDesc?e.jsx(m,{}):e.jsx(k,{}):e.jsx(m,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...$(),children:_.map(s=>(I(s),e.jsxs(v.Fragment,{children:[e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150 ",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"py-2 px-4 ",children:t.render("Cell")}))}),s.original.subCategories&&s.original.subCategories.map((t,a)=>e.jsxs(v.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150 ",children:[e.jsx("td",{}),e.jsxs("td",{className:"py-2 px-8 flex gap-2 hover:text-blue-500 cursor-pointer",onClick:()=>n(`/ServiceCategory/editServiceCategory/${s.original._id}/${t._id}`),children:[e.jsx(b,{}),t.photo&&e.jsx("img",{src:`/api/logo/download/${t.photo}`,alt:t.alt,className:"w-6 h-6"}),e.jsx("span",{children:t.category})]}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(l,{to:`/ServiceCategory/editServiceCategory/${s.original._id}/${t._id}`,children:e.jsx(c,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>d({categoryId:s.original._id,subCategoryId:t._id}),children:e.jsx(x,{})})]})})]}),t.subSubCategory&&t.subSubCategory.map((r,i)=>e.jsxs("tr",{className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150 ",children:[e.jsx("td",{}),e.jsxs("td",{className:"py-2 px-12 flex gap-2 hover:text-blue-500 cursor-pointer",onClick:()=>n(`/ServiceCategory/editServiceCategory/${s.original._id}/${r._id}`),children:[e.jsx(b,{}),r.photo&&e.jsx("img",{alt:r.alt,src:`/api/logo/download/${r.photo}`,className:"w-6 h-6"}),e.jsx("span",{children:r.category})]}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(l,{to:`/ServiceCategory/editServiceCategory/${s.original._id}/${t._id}/${r._id}`,children:e.jsx(c,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>d({categoryId:s.original._id,subCategoryId:t._id,subSubCategoryId:r._id}),children:e.jsx(x,{})})]})})]},i))]},a))]},s.id)))})]})})]})};export{E as default};
