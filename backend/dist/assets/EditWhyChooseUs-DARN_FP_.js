import{r as o,E as q,s as z,b,j as t}from"./index-Bf0_iwmC.js";import{R as L}from"./quill.snow-N0L4fiYi.js";const O=()=>{const[g,f]=o.useState(""),[x,j]=o.useState(""),[i,N]=o.useState([]),{id:m}=q(),[w,v]=o.useState([]),[c,y]=o.useState([]),[r,u]=o.useState([]),[h,C]=o.useState([]),[d,p]=o.useState([]),P=z(),I={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}};o.useEffect(()=>{$()},[]);const $=async()=>{try{const e=(await b.get(`/api/WhyChooseUs/getWhyChooseUsById?id=${m}`,{withCredentials:!0})).data.data;f(e.title),j(e.description),v(e.photo),p(e.imgTitle),u(e.alt)}catch(l){console.error("Error fetching data:",l)}},k=async l=>{l.preventDefault();try{const e=new FormData;e.append("title",g),e.append("description",x);const s=[...r,...c],n=[...d,...h];i.forEach(a=>e.append("photo",a)),s.forEach(a=>e.append("alt",a)),n.forEach(a=>e.append("imgTitle",a)),await b.put(`/api/WhyChooseUs/updateWhyChooseUs?id=${m}`,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),P("/whychooseus")}catch(e){console.error("Error submitting data:",e)}},A=l=>{const e=Array.from(l.target.files);N([...i,...e])},E=(l,e)=>{const s=[...r];s[e]=l.target.value,u(s)},S=(l,e)=>{const s=[...c];s[e]=l.target.value,y(s)},D=(l,e)=>{const s=[...d];s[e]=l.target.value,p(s)},U=(l,e)=>{const s=[...h];s[e]=l.target.value,C(s)},F=(l,e,s)=>{l.preventDefault(),b.delete(`/api/whychooseus/${m}/image/${e}/${s}`,{withCredentials:!0}).then(()=>{const n=w.filter(R=>R!==e);v(n);const a=[...r],T=[...d];T.splice(s,1),a.splice(s,1),u(a),p(T)}).catch(n=>console.error("Error deleting photo:",n))},W=(l,e)=>{l.preventDefault();const s=[...i];s.splice(e,1),N(s);const n=[...c],a=[...h];n.splice(e,1),a.splice(e,1),y(n),C(a)};return t.jsxs("form",{onSubmit:k,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Why Choose Us"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{type:"text",id:"title",value:g,onChange:l=>f(l.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"description",className:"block font-semibold mb-2",children:"Description"}),t.jsx(L,{value:x,onChange:j,modules:I,className:"quill"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:w.map((l,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${l}`,alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:r[e],onChange:s=>E(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgTitle-${e}`,className:"block mt-2",children:["Image Title:",t.jsx("input",{type:"text",id:`imgTitle-${e}`,value:d[e],onChange:s=>D(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>F(s,l,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",onChange:A,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:i.map((l,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(l),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:c[e]||"",onChange:s=>S(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgTitle-new-${e}`,className:"block mt-2",children:["Image Title:",t.jsx("input",{type:"text",id:`imgTitle-new-${e}`,value:h[e]||"",onChange:s=>U(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>W(s,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none",children:"Save Changes"})})]})};export{O as default};
