import{r as o,s as E,j as e,b as S}from"./index-Bf0_iwmC.js";import{R as I}from"./quill.snow-N0L4fiYi.js";import{Q as L,B as w}from"./ReactToastify-C8h-yn_H.js";import"./clsx-B-dksMZM.js";const U={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},V=[{value:"Home",label:"Home"},{value:"About",label:"About"},{value:"Services",label:"Services"},{value:"Contact",label:"Contact"},{value:"Products",label:"Products"},{value:"Resources",label:"Resources"},{value:"Global Presence",label:"Global Presence"}],Y=()=>{const[r,h]=o.useState("Home"),[p,b]=o.useState(""),[f,v]=o.useState(""),[n,u]=o.useState([]),[i,c]=o.useState([]),[d,x]=o.useState(null),[g,j]=o.useState("active"),[C,m]=o.useState([]),[N,P]=o.useState(1),[k,A]=o.useState([]),F=E(),R=s=>{const t=Array.from(s.target.files);if(n.length+t.length>5){w.error("You can only upload up to 5 photos");return}u([...n,...t]);const a=Array.from({length:t.length},()=>"");c([...i,...a]);const l=Array.from({length:t.length},()=>"");A([...k,...l])},T=s=>{const t=s.target.files[0];t&&x(t)},D=async s=>{try{const a=(await S.get(`/api/banner/getCountBySection?section=${s}`,{withCredentials:!0})).data;if(a>0){const l=Array.from({length:a+1},(y,O)=>O+1);m(l)}else m([1])}catch(t){console.error(t),m([1])}};o.useEffect(()=>{D(r)},[r]);const q=s=>{u(t=>t.filter((a,l)=>l!==s)),c(t=>t.filter((a,l)=>l!==s))},B=async s=>{s.preventDefault();try{const t=new FormData;t.append("section",r),t.append("title",p),t.append("details",f),t.append("status",g),t.append("priority",N),n.forEach((l,y)=>{t.append("photo",l),t.append("alt",i[y])}),d&&t.append("video",d);const a=await S.post("/api/banner/insertBanner",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});h(""),b(""),v(""),u([]),j("active"),c([]),x(null),F("/banner")}catch(t){t.response&&t.response.status===400&&w.error(t.response.data.message)}};return e.jsxs("form",{onSubmit:B,className:"p-4",children:[e.jsx(L,{}),e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Banner"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"section",className:"block font-semibold mb-2",children:"Section"}),e.jsx("select",{value:r,onChange:s=>h(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0,children:V.map((s,t)=>e.jsx("option",{value:s.value,children:s.label},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:p,onChange:s=>b(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),e.jsx(I,{value:f,onChange:v,modules:U,className:"quill"})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photos"}),e.jsx("input",{type:"file",name:"photo",id:"photo",multiple:!0,onChange:R,className:"border rounded focus:outline-none",accept:"image/*"}),n.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-4",children:n.map((s,t)=>e.jsxs("div",{className:"relative group flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Service ${t+1}`,className:"h-32 w-56 object-cover"}),e.jsx("button",{onClick:()=>q(t),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]}),e.jsxs("label",{className:"block mt-2",children:["Alt Text:",e.jsx("input",{type:"text",value:i[t],onChange:a=>{const l=[...i];l[t]=a.target.value,c(l)},className:"w-full p-2 border rounded focus:outline-none"})]})]},t))})]}),e.jsxs("div",{className:"mt-4 mb-4",children:[e.jsx("label",{htmlFor:"video",className:"block font-semibold mb-2",children:"Video"}),e.jsx("input",{type:"file",name:"video",id:"video",onChange:T,className:"border rounded focus:outline-none",accept:"video/*"}),d&&e.jsx("div",{className:"mt-2",children:e.jsxs("video",{controls:!0,className:"w-full h-auto",children:[e.jsx("source",{src:URL.createObjectURL(d),type:"video/mp4"}),"Your browser does not support the video tag."]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{value:g,onChange:s=>j(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("select",{value:N,onChange:s=>P(Number(s.target.value)),className:"w-full p-2 border rounded focus:outline-none",children:C.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("button",{type:"submit",className:"w-full p-3 mt-6 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Save"})]})};export{Y as default};
