import{r as l,E as _,s as q,b as m,j as t}from"./index-Bf0_iwmC.js";import"./quill.snow-N0L4fiYi.js";const J=()=>{const[h,p]=l.useState(""),[b,f]=l.useState(""),[x,j]=l.useState(""),[c,v]=l.useState([]),[N,g]=l.useState("active"),{id:d}=_(),[w,S]=l.useState([]),[u,P]=l.useState([]),[n,i]=l.useState([]),C=q();l.useEffect(()=>{A()},[]);const A=async()=>{try{const e=(await m.get(`/api/staff/getStaffById?id=${d}`,{withCredentials:!0})).data.data;p(e.S_id),f(e.name),j(e.jobTitle),S(e.photo),g(e.status),i(e.alt)}catch(s){console.error(s)}},T=async s=>{s.preventDefault();try{const e=new FormData;e.append("S_id",h),e.append("name",b),e.append("jobTitle",x),e.append("status",N);const a=[...n,...u];c.forEach(r=>{e.append("photo",r)}),a.forEach(r=>{e.append("alt",r)});const o=await m.put(`/api/staff/updateStaff?id=${d}`,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});C("/ourTeam")}catch(e){console.error(e)}},$=(s,e)=>{const a=[...n];a[e]=s.target.value,i(a)},k=(s,e)=>{const a=[...u];a[e]=s.target.value,P(a)},E=s=>{const e=Array.from(s.target.files);v([...c,...e])},D=(s,e,a)=>{s.preventDefault(),m.delete(`/api/staff/${d}/image/${e}/${a}`,{withCredentials:!0}).then(o=>{const r=w.filter(I=>I!==e);S(r);const y=[...n];y.splice(a,1),i(y)}).catch(o=>{console.error(o)})},F=(s,e)=>{s.preventDefault();const a=[...c];a.splice(e,1),v(a);const o=[...n];o.splice(e,1),i(o)};return t.jsxs("form",{onSubmit:T,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Team Member"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"S_id",className:"block font-semibold mb-2",children:"Employee ID"}),t.jsx("input",{type:"text",id:"S_id",value:h,onChange:s=>p(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"name",className:"block font-semibold mb-2",children:"Name"}),t.jsx("input",{type:"text",id:"name",value:b,onChange:s=>f(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"jobTitle",className:"block font-semibold mb-2",children:"Job Title"}),t.jsx("input",{type:"text",id:"jobTitle",value:x,onChange:s=>j(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:w.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${s}`,alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:n[e],onChange:a=>$(a,e),className:"w-56 p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:a=>D(a,s,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",onChange:E,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:c.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(s),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:u[e]||"",onChange:a=>k(a,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:a=>F(a,e),className:`absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex\r
                justify-center items-center`,children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),t.jsxs("select",{id:"status",value:N,onChange:s=>g(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none",children:"Save Changes"})})]})};export{J as default};
