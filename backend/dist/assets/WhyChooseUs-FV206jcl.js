import{r as a,s as R,j as e,w as L,L as f,x as O,y as z,b as r,z as $,C as q,D as _,v as Q}from"./index-Bf0_iwmC.js";import{r as y,U as G,l as V}from"./index-DPkFNSVF.js";import{Q as J,B as K}from"./ReactToastify-C8h-yn_H.js";import{M as j}from"./index-D-LDOxyL.js";import{R as X}from"./quill.snow-N0L4fiYi.js";import"./clsx-B-dksMZM.js";import"./index-D5MXH53t.js";j.setAppElement("#root");const oe=()=>{const[c,d]=a.useState(""),[h,u]=a.useState("");a.useState("");const[o,N]=a.useState([]),[w,m]=a.useState(!0),[l,v]=a.useState(""),C=R(),[i,x]=a.useState(null),[S,p]=a.useState(!1),H=a.useMemo(()=>o.filter(s=>s.title.toLowerCase().includes(l.toLowerCase())),[o,l]),T=()=>{K.success("Updated Successfully!")},U=a.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Title",accessor:"title",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>C(`/whychooseus/editwhychooseus/${s.original._id}`),children:s.original.title})},{Header:"Photo",accessor:"photo",Cell:({value:s})=>{const t=Array.isArray(s)&&s.length>0?s[0]:null;return t?e.jsx("img",{src:`/api/image/download/${t}`,alt:"Item",className:"w-32 h-20 object-cover"}):null},disableSortBy:!0},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-gray-700 hover:text-gray-900 transition",onClick:()=>E(s.original),children:e.jsx(L,{})}),e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(f,{to:`/whychooseus/editwhychooseus/${s.original._id}`,children:e.jsx(O,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>I(s.original._id),children:e.jsx(z,{})})]}),disableSortBy:!0}],[]),E=s=>{x(s),p(!0)},g=()=>{p(!1),x(null)},{getTableProps:A,getTableBodyProps:B,headerGroups:P,rows:k,prepareRow:F}=y.useTable({columns:U,data:H},y.useSortBy),b=async()=>{m(!0);try{const t=(await r.get("/api/whyChooseUs/getAllWhyChooseUs",{withCredentials:!0})).data.map((n,D)=>({...n,id:D+1}));N(t)}catch(s){console.error("Error fetching data:",s)}finally{m(!1)}},I=async s=>{try{await r.delete(`/api/WhyChooseUs/deleteWhyChooseUs?id=${s}`,{withCredentials:!0}),b()}catch(t){console.error(t)}};a.useEffect(()=>{b()},[]);const M=async()=>{try{const s=await r.get("/api/pageHeading/heading?pageType=whychooseus",{withCredentials:!0}),{heading:t,subheading:n}=s.data;d(t||""),u(n||"")}catch(s){console.error("Error fetching headings:",s)}},W=async()=>{try{await r.put("/api/pageHeading/updateHeading?pageType=whychooseus",{pagetype:"whychooseus",heading:c,subheading:h},{withCredentials:!0}),T()}catch(s){console.error("Error saving headings:",s)}};return a.useEffect(()=>{M()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(J,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:c,onChange:s=>d(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 font-serif uppercase",children:"Sub heading"}),e.jsx("input",{type:"text",value:h,onChange:s=>u(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 font-serif uppercase",children:"Why Choose Us"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(f,{to:"/whychooseus/createwhychooseus",children:e.jsx($,{size:15})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:l,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage your items"}),w?e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{animation:V,size:56})}):e.jsx(e.Fragment,{children:o.length===0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse overflow-x-auto",...A(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:P.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsx("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.render("Header"),t.isSorted?t.isSortedDesc?e.jsx(q,{}):e.jsx(_,{}):null]})}))}))}),e.jsx("tbody",{...B(),children:k.map(s=>(F(s),e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"py-2 px-4 text-gray-700",children:t.render("Cell")}))})))})]})}),e.jsx(j,{isOpen:S,onRequestClose:g,contentLabel:"Banner Details",className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 ",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow-lg min-w-54 m-4 relative",children:[e.jsx("button",{onClick:g,className:"absolute top-5 right-5 text-gray-500 hover:text-gray-700",children:e.jsx(Q,{size:20})}),e.jsx("h2",{className:"text-xl font-bold font-serif mb-4",children:"Banner"}),i&&e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Title :"}),e.jsx("p",{children:i.title})]}),e.jsxs("div",{className:" mt-2",children:[e.jsx("p",{className:"mr-2 font-semibold font-serif",children:"Description :"}),e.jsx(X,{readOnly:!0,value:i.description,modules:{toolbar:!1},theme:"bubble",className:"quill"})]})]})]})})]})};export{oe as default};
